<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>SSH Agent under MacOS Ventura</title>
  <meta name="description" content="After upgrading to MacOS Venture I had a bit of a problem with the SSH agent. This problem, though, could still 
be related to the interface between the monitor and the chair, as we developers like to say.

I’m using multiple SSH keys, mainly to distinguish between my personal and work GitHub accounts. Git has a nice option for that, btw:

export GIT_SSH_COMMAND='ssh -i ~/.ssh/personal_github_rsa -o IdentitiesOnly=yes'


After the upgrade, 
I migrated the SSH keys from the old machine. Manually. I mean, like scp-manually. Don’t ask me why I did not use the standard migration tools 
. Believe me, that are something things behind those slick silver facade, that you don’t want to know about. But to imagine the 
horror I will just say, that the experience with migration tools for my platform made me really miss CloneZilla.

Anyway, back to the topic. After the migration, when I tried to push something to my personal GitHub repo, I got the authentication error.
So, I had to add the key to the agent. I did it like this:

eval "$(ssh-agent -s)"
ssh-add -K ~/.ssh/personal_github_rsa
ssh-add -I

The -K option was specific to macOS and adds the specified identity file to the Keychain, which is the secure password management system on macOS.

Lately, I also stumbled upon this:
WARNING: The -K and -A flags are deprecated and have been replaced
by the --apple-use-keychain and --apple-load-keychain
flags, respectively.  To suppress this warning, set the
environment variable APPLE_SSH_ADD_BEHAVIOR as described in
the ssh-add(1) manual page.

So, probably, it is better to use the new options:
ssh-add --apple-use-keychain ~/.ssh/personal_github_rsa

">
  <meta name="author" content="Deviant Syndrome">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="SSH Agent under MacOS Ventura">
  <meta name="twitter:description" content="After upgrading to MacOS Venture I had a bit of a problem with the SSH agent. This problem, though, could still 
be related to the interface between the monitor and the chair, as we developers like to say.

I’m using multiple SSH keys, mainly to distinguish between my personal and work GitHub accounts. Git has a nice option for that, btw:

export GIT_SSH_COMMAND='ssh -i ~/.ssh/personal_github_rsa -o IdentitiesOnly=yes'


After the upgrade, 
I migrated the SSH keys from the old machine. Manually. I mean, like scp-manually. Don’t ask me why I did not use the standard migration tools 
. Believe me, that are something things behind those slick silver facade, that you don’t want to know about. But to imagine the 
horror I will just say, that the experience with migration tools for my platform made me really miss CloneZilla.

Anyway, back to the topic. After the migration, when I tried to push something to my personal GitHub repo, I got the authentication error.
So, I had to add the key to the agent. I did it like this:

eval "$(ssh-agent -s)"
ssh-add -K ~/.ssh/personal_github_rsa
ssh-add -I

The -K option was specific to macOS and adds the specified identity file to the Keychain, which is the secure password management system on macOS.

Lately, I also stumbled upon this:
WARNING: The -K and -A flags are deprecated and have been replaced
by the --apple-use-keychain and --apple-load-keychain
flags, respectively.  To suppress this warning, set the
environment variable APPLE_SSH_ADD_BEHAVIOR as described in
the ssh-add(1) manual page.

So, probably, it is better to use the new options:
ssh-add --apple-use-keychain ~/.ssh/personal_github_rsa

">
  
  <meta name="twitter:image" content="/images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="SSH Agent under MacOS Ventura">
  <meta property="og:description" content="After upgrading to MacOS Venture I had a bit of a problem with the SSH agent. This problem, though, could still 
be related to the interface between the monitor and the chair, as we developers like to say.

I’m using multiple SSH keys, mainly to distinguish between my personal and work GitHub accounts. Git has a nice option for that, btw:

export GIT_SSH_COMMAND='ssh -i ~/.ssh/personal_github_rsa -o IdentitiesOnly=yes'


After the upgrade, 
I migrated the SSH keys from the old machine. Manually. I mean, like scp-manually. Don’t ask me why I did not use the standard migration tools 
. Believe me, that are something things behind those slick silver facade, that you don’t want to know about. But to imagine the 
horror I will just say, that the experience with migration tools for my platform made me really miss CloneZilla.

Anyway, back to the topic. After the migration, when I tried to push something to my personal GitHub repo, I got the authentication error.
So, I had to add the key to the agent. I did it like this:

eval "$(ssh-agent -s)"
ssh-add -K ~/.ssh/personal_github_rsa
ssh-add -I

The -K option was specific to macOS and adds the specified identity file to the Keychain, which is the secure password management system on macOS.

Lately, I also stumbled upon this:
WARNING: The -K and -A flags are deprecated and have been replaced
by the --apple-use-keychain and --apple-load-keychain
flags, respectively.  To suppress this warning, set the
environment variable APPLE_SSH_ADD_BEHAVIOR as described in
the ssh-add(1) manual page.

So, probably, it is better to use the new options:
ssh-add --apple-use-keychain ~/.ssh/personal_github_rsa

">
  <meta property="og:image" content="/images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="/css/main.css?1688295469768083000">
  <link rel="canonical" href="/2023/SSH_Agent_under_MacOS_Ventura/">
  <link rel="alternate" type="application/rss+xml" title="Deviant Syndrome" href="/feed.xml">
<script>
window.MathJax = {
  tex: {
      packages: ['base', 'ams', 'noerrors', 'noundefined'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: false
  },
  loader: {
    load: ['[tex]/noerrors']
  }
};

  window.MathJax = {
  startup: {
    ready: () => {
      console.log('MathJax is loaded, but not yet initialized');
      MathJax.startup.defaultReady();
      console.log('MathJax is initialized, and the initial typeset is queued');
    }
  }
};
</script>
<style>
  @font-face {
    font-family: 'alphaTab';
     src: url('/js/alphaTab/Font/Bravura.eot');
     src: url('/js/alphaTab/Font/Bravura.eot') format('embedded-opentype')
          , url('/js/alphaTab/Font/Bravura.woff') format('woff')
          , url('/js/alphaTab/Font/Bravura.etf') format('opentype')
          , url('/js/alphaTab/Font/Bravura.svg') format('svg');
     font-weight: normal;
     font-style: normal;
}
</style>
<link rel="stylesheet" type="text/css" href="/assets/notation.css"> 
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="/js/mathjax/tex-chtml.js" id="MathJax-script" async></script>

<script src="/js/alphaTab/AlphaTab.js" async></script>
<script src="/js/audiojs/audio.min.js"></script>
<link  href="/js/nanogallery2/css/nanogallery2.min.css" rel="stylesheet" type="text/css">
<script  type="text/javascript" src="/js/nanogallery2/jquery.nanogallery2.min.js"></script>
<link rel="stylesheet" href="/css/main.css?1688295469768083000">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Deviant Syndrome">
          <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Deviant Syndrome</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">coding, multimedia, gamedev, engineering</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to Deviant Syndrome blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

              <!-- Bandcamp -->
              <li class="navigation__item">
                <a href="http://hexensoldat.bandcamp.com" title="@Deviant Syndrome on Bandcamp"
                   target="_blank">
                  <i class="icon icon-social-bandcamp"></i>
                  <span class="label">Bandcamp</span>
                </a>
              </li>

              

            

            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/deviant-syndrome" title="deviant-syndrome on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>

            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2023-06-17 12:15" class="post-meta__date date">17 Jun 2023</time>
      
      &#8226; <span class="post-meta__tags">on <a href="/tags/#bash">bash</a> </span>
      
    </div>
    <h1 class="post-title">SSH Agent under MacOS Ventura</h1>
  </header>

  <section class="post">
    <p>After upgrading to MacOS Venture I had a bit of a problem with the SSH agent. This problem, though, could still 
be related to the interface between the monitor and the chair, as we developers like to say.</p>

<p>I’m using multiple SSH keys, mainly to distinguish between my personal and work GitHub accounts. Git has a nice option for that, btw:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">GIT_SSH_COMMAND</span><span class="o">=</span><span class="s1">'ssh -i ~/.ssh/personal_github_rsa -o IdentitiesOnly=yes'</span>
</code></pre></div></div>

<p>After the upgrade, 
I migrated the SSH keys from the old machine. Manually. I mean, like <code class="language-plaintext highlighter-rouge">scp</code>-manually. Don’t ask me why I did not use the standard migration tools 
. Believe me, that are something things behind those slick silver facade, that you don’t want to know about. But to imagine the 
horror I will just say, that the experience with migration tools for my platform made me really miss <a href="https://clonezilla.org/">CloneZilla</a>.</p>

<p>Anyway, back to the topic. After the migration, when I tried to push something to my personal GitHub repo, I got the authentication error.
So, I had to add the key to the agent. I did it like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>ssh-agent <span class="nt">-s</span><span class="si">)</span><span class="s2">"</span>
ssh-add <span class="nt">-K</span> ~/.ssh/personal_github_rsa
ssh-add <span class="nt">-I</span>
</code></pre></div></div>
<p>The <code class="language-plaintext highlighter-rouge">-K</code> option was specific to macOS and adds the specified identity file to the Keychain, which is the secure password management system on macOS.</p>

<p>Lately, I also stumbled upon this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WARNING: The -K and -A flags are deprecated and have been replaced
by the --apple-use-keychain and --apple-load-keychain
flags, respectively.  To suppress this warning, set the
environment variable APPLE_SSH_ADD_BEHAVIOR as described in
the ssh-add(1) manual page.
</code></pre></div></div>
<p>So, probably, it is better to use the new options:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-add <span class="nt">--apple-use-keychain</span> ~/.ssh/personal_github_rsa
</code></pre></div></div>

  </section>
  
</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2023 Deviant Syndrome. All rights reserved.</span>
  <span class="footer__copyright">Based on <a href="https://github.com/joshgerdes/jekyll-uno">jekyll-uno</a> theme by Josh Gerdes</span>
</footer>

<script type="text/javascript" src="/js/main.js?1688295469768083000"></script>
<script type="text/javascript" src="/js/sheetrender.js"></script>
<script src="/js/audioplaylist.js"></script>	


    </div>
  </body>
</html>
