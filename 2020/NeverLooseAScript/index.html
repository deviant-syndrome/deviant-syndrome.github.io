<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>Never loose a Bash script again</title>
  <meta name="description" content="Like most of us, I’ve a handful of bash scripts to automate my day to day tasks, related to work and personal activities. They all live somewhere along the lines of ~/myscripts and this entry is added to my PATH shell env.

The downside of this, is, of course, that you scripts directory become a bit of a mess, congested with all that obsolete and half-baked stuff, that also pollutes your autocomplete as well.

To fight this I came up with a simple convention for all the utility scripts I place In that magic folder. There should be two commented block after bash header in every script: first is a single string of space separated tags, then a short description of what this script does.

Example would be like:
#!/bin/bash
# blog util mp3
# Convert DAW rendered demo WAVs to MP3 and places them 
# into dedicated blog folder


Sticking to that convention, I was able to come up with a script that generates a summary of my utilities. It also filters by tag and flags the undocumented ones.


  Lots of poor Bash gibberish


  #!/bin/bash
# meta
# Lists my DIY Bash scripts
nodescr=""

files=($(ls ~/myscripts/. | grep -v '\.'))
tags=""
for f in ${files[*]}; do
    filename=$f
    descr=""
    skip="no"
    linecount=0
    while IFS= read -r line; do
        if [[ "$line" =~ ^#.*$ ]]; then
            let "linecount+=1"
            if ((linecount == 2)); then
                if ! [ -z "$1" ] || [ "$1" == "tags" ]; then
                    if [[ $line != *"$1"* ]]; then
                        skip="yes"
                    fi
                fi
                tags="$tags${line:1}"

            fi
            if ((linecount &gt; 2)); then
                descr+="${line:1}"
            fi
        else
            break
        fi
    done &lt;"$filename"
    if [ -z "$descr" ]; then
        nodescr="$nodescr $filename"
    else
        dd="$(printf '%-20s' $filename):"
        if [[ "$1" != "tags" ]]; then
            if [[ "$skip" == "no" ]]; then
                echo "$dd#$descr" | awk -f table.awk
                printf '\n'
            fi
        fi
    fi
done
echo $tags | xargs -n1 | sort -u | xargs
echo Missing description: $nodescr
  


Output looks really nice, though:

br34kp0int@lobsterblood~/» ./scriptz blog 
blogmp3             : Converts the files from Repulsive 
                      Recrods tech software demos to MP3 
                      and copies them to blog for 
                      educational purposes

blogthumbs          : Generates thumbnails for blog 
                      galleries

day2day             : Generates a blog entry with current 
                      data and some random title

">
  <meta name="author" content="Deviant Syndrome">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Never loose a Bash script again">
  <meta name="twitter:description" content="Like most of us, I’ve a handful of bash scripts to automate my day to day tasks, related to work and personal activities. They all live somewhere along the lines of ~/myscripts and this entry is added to my PATH shell env.

The downside of this, is, of course, that you scripts directory become a bit of a mess, congested with all that obsolete and half-baked stuff, that also pollutes your autocomplete as well.

To fight this I came up with a simple convention for all the utility scripts I place In that magic folder. There should be two commented block after bash header in every script: first is a single string of space separated tags, then a short description of what this script does.

Example would be like:
#!/bin/bash
# blog util mp3
# Convert DAW rendered demo WAVs to MP3 and places them 
# into dedicated blog folder


Sticking to that convention, I was able to come up with a script that generates a summary of my utilities. It also filters by tag and flags the undocumented ones.


  Lots of poor Bash gibberish


  #!/bin/bash
# meta
# Lists my DIY Bash scripts
nodescr=""

files=($(ls ~/myscripts/. | grep -v '\.'))
tags=""
for f in ${files[*]}; do
    filename=$f
    descr=""
    skip="no"
    linecount=0
    while IFS= read -r line; do
        if [[ "$line" =~ ^#.*$ ]]; then
            let "linecount+=1"
            if ((linecount == 2)); then
                if ! [ -z "$1" ] || [ "$1" == "tags" ]; then
                    if [[ $line != *"$1"* ]]; then
                        skip="yes"
                    fi
                fi
                tags="$tags${line:1}"

            fi
            if ((linecount &gt; 2)); then
                descr+="${line:1}"
            fi
        else
            break
        fi
    done &lt;"$filename"
    if [ -z "$descr" ]; then
        nodescr="$nodescr $filename"
    else
        dd="$(printf '%-20s' $filename):"
        if [[ "$1" != "tags" ]]; then
            if [[ "$skip" == "no" ]]; then
                echo "$dd#$descr" | awk -f table.awk
                printf '\n'
            fi
        fi
    fi
done
echo $tags | xargs -n1 | sort -u | xargs
echo Missing description: $nodescr
  


Output looks really nice, though:

br34kp0int@lobsterblood~/» ./scriptz blog 
blogmp3             : Converts the files from Repulsive 
                      Recrods tech software demos to MP3 
                      and copies them to blog for 
                      educational purposes

blogthumbs          : Generates thumbnails for blog 
                      galleries

day2day             : Generates a blog entry with current 
                      data and some random title

">
  
  <meta name="twitter:image" content="/images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="Never loose a Bash script again">
  <meta property="og:description" content="Like most of us, I’ve a handful of bash scripts to automate my day to day tasks, related to work and personal activities. They all live somewhere along the lines of ~/myscripts and this entry is added to my PATH shell env.

The downside of this, is, of course, that you scripts directory become a bit of a mess, congested with all that obsolete and half-baked stuff, that also pollutes your autocomplete as well.

To fight this I came up with a simple convention for all the utility scripts I place In that magic folder. There should be two commented block after bash header in every script: first is a single string of space separated tags, then a short description of what this script does.

Example would be like:
#!/bin/bash
# blog util mp3
# Convert DAW rendered demo WAVs to MP3 and places them 
# into dedicated blog folder


Sticking to that convention, I was able to come up with a script that generates a summary of my utilities. It also filters by tag and flags the undocumented ones.


  Lots of poor Bash gibberish


  #!/bin/bash
# meta
# Lists my DIY Bash scripts
nodescr=""

files=($(ls ~/myscripts/. | grep -v '\.'))
tags=""
for f in ${files[*]}; do
    filename=$f
    descr=""
    skip="no"
    linecount=0
    while IFS= read -r line; do
        if [[ "$line" =~ ^#.*$ ]]; then
            let "linecount+=1"
            if ((linecount == 2)); then
                if ! [ -z "$1" ] || [ "$1" == "tags" ]; then
                    if [[ $line != *"$1"* ]]; then
                        skip="yes"
                    fi
                fi
                tags="$tags${line:1}"

            fi
            if ((linecount &gt; 2)); then
                descr+="${line:1}"
            fi
        else
            break
        fi
    done &lt;"$filename"
    if [ -z "$descr" ]; then
        nodescr="$nodescr $filename"
    else
        dd="$(printf '%-20s' $filename):"
        if [[ "$1" != "tags" ]]; then
            if [[ "$skip" == "no" ]]; then
                echo "$dd#$descr" | awk -f table.awk
                printf '\n'
            fi
        fi
    fi
done
echo $tags | xargs -n1 | sort -u | xargs
echo Missing description: $nodescr
  


Output looks really nice, though:

br34kp0int@lobsterblood~/» ./scriptz blog 
blogmp3             : Converts the files from Repulsive 
                      Recrods tech software demos to MP3 
                      and copies them to blog for 
                      educational purposes

blogthumbs          : Generates thumbnails for blog 
                      galleries

day2day             : Generates a blog entry with current 
                      data and some random title

">
  <meta property="og:image" content="/images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="/css/main.css?1661590535535066000">
  <link rel="canonical" href="/2020/NeverLooseAScript/">
  <link rel="alternate" type="application/rss+xml" title="Deviant Syndrome" href="/feed.xml">
<script>
window.MathJax = {
  tex: {
      packages: ['base', 'ams', 'noerrors', 'noundefined'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: false
  },
  loader: {
    load: ['[tex]/noerrors']
  }
};

  window.MathJax = {
  startup: {
    ready: () => {
      console.log('MathJax is loaded, but not yet initialized');
      MathJax.startup.defaultReady();
      console.log('MathJax is initialized, and the initial typeset is queued');
    }
  }
};
</script>
<style>
  @font-face {
    font-family: 'alphaTab';
     src: url('/js/alphaTab/Font/Bravura.eot');
     src: url('/js/alphaTab/Font/Bravura.eot') format('embedded-opentype')
          , url('/js/alphaTab/Font/Bravura.woff') format('woff')
          , url('/js/alphaTab/Font/Bravura.etf') format('opentype')
          , url('/js/alphaTab/Font/Bravura.svg') format('svg');
     font-weight: normal;
     font-style: normal;
}
</style>
<link rel="stylesheet" type="text/css" href="/assets/notation.css"> 
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="/js/mathjax/tex-chtml.js" id="MathJax-script" async></script>

<script src="/js/alphaTab/AlphaTab.js" async></script>
<script src="/js/audiojs/audio.min.js"></script>
<link  href="/js/nanogallery2/css/nanogallery2.min.css" rel="stylesheet" type="text/css">
<script  type="text/javascript" src="/js/nanogallery2/jquery.nanogallery2.min.js"></script>
<link rel="stylesheet" href="/css/main.css?1661590535535066000">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Deviant Syndrome">
          <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Deviant Syndrome</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">coding, multimedia, gamedev, engineering</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to Deviant Syndrome blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

              <!-- Bandcamp -->
              <li class="navigation__item">
                <a href="http://hexensoldat.bandcamp.com" title="@Deviant Syndrome on Bandcamp"
                   target="_blank">
                  <i class="icon icon-social-bandcamp"></i>
                  <span class="label">Bandcamp</span>
                </a>
              </li>

              

            

            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/deviant-syndrome" title="deviant-syndrome on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>

            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2020-05-14 19:07" class="post-meta__date date">14 May 2020</time>
      
      &#8226; <span class="post-meta__tags">on <a href="/tags/#bash">bash</a> </span>
      
    </div>
    <h1 class="post-title">Never loose a Bash script again</h1>
  </header>

  <section class="post">
    <p>Like most of us, I’ve a handful of bash scripts to automate my day to day tasks, related to work and personal activities. They all live somewhere along the lines of ~/myscripts and this entry is added to my PATH shell env.</p>

<p>The downside of this, is, of course, that you scripts directory become a bit of a mess, congested with all that obsolete and half-baked stuff, that also pollutes your autocomplete as well.</p>

<p>To fight this I came up with a simple convention for all the utility scripts I place In that magic folder. There should be two commented block after bash header in every script: first is a single string of space separated tags, then a short description of what this script does.</p>

<p>Example would be like:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># blog util mp3</span>
<span class="c"># Convert DAW rendered demo WAVs to MP3 and places them </span>
<span class="c"># into dedicated blog folder</span>
</code></pre></div></div>

<p>Sticking to that convention, I was able to come up with a script that generates a summary of my utilities. It also filters by tag and flags the undocumented ones.</p>

<details>
  <summary>Lots of poor Bash gibberish
</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># meta</span>
<span class="c"># Lists my DIY Bash scripts</span>
<span class="nv">nodescr</span><span class="o">=</span><span class="s2">""</span>

<span class="nv">files</span><span class="o">=(</span><span class="si">$(</span><span class="nb">ls</span> ~/myscripts/. | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'\.'</span><span class="si">)</span><span class="o">)</span>
<span class="nv">tags</span><span class="o">=</span><span class="s2">""</span>
<span class="k">for </span>f <span class="k">in</span> <span class="k">${</span><span class="nv">files</span><span class="p">[*]</span><span class="k">}</span><span class="p">;</span> <span class="k">do
    </span><span class="nv">filename</span><span class="o">=</span><span class="nv">$f</span>
    <span class="nv">descr</span><span class="o">=</span><span class="s2">""</span>
    <span class="nv">skip</span><span class="o">=</span><span class="s2">"no"</span>
    <span class="nv">linecount</span><span class="o">=</span>0
    <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-r</span> line<span class="p">;</span> <span class="k">do
        if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span> <span class="o">=</span>~ ^#.<span class="k">*</span><span class="nv">$ </span><span class="o">]]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">let</span> <span class="s2">"linecount+=1"</span>
            <span class="k">if</span> <span class="o">((</span>linecount <span class="o">==</span> 2<span class="o">))</span><span class="p">;</span> <span class="k">then
                if</span> <span class="o">!</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"tags"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
                    if</span> <span class="o">[[</span> <span class="nv">$line</span> <span class="o">!=</span> <span class="k">*</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span><span class="k">*</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
                        </span><span class="nv">skip</span><span class="o">=</span><span class="s2">"yes"</span>
                    <span class="k">fi
                fi
                </span><span class="nv">tags</span><span class="o">=</span><span class="s2">"</span><span class="nv">$tags</span><span class="k">${</span><span class="nv">line</span>:1<span class="k">}</span><span class="s2">"</span>

            <span class="k">fi
            if</span> <span class="o">((</span>linecount <span class="o">&gt;</span> 2<span class="o">))</span><span class="p">;</span> <span class="k">then
                </span>descr+<span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">line</span>:1<span class="k">}</span><span class="s2">"</span>
            <span class="k">fi
        else
            </span><span class="nb">break
        </span><span class="k">fi
    done</span> &lt;<span class="s2">"</span><span class="nv">$filename</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$descr</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nv">nodescr</span><span class="o">=</span><span class="s2">"</span><span class="nv">$nodescr</span><span class="s2"> </span><span class="nv">$filename</span><span class="s2">"</span>
    <span class="k">else
        </span><span class="nb">dd</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">printf</span> <span class="s1">'%-20s'</span> <span class="nv">$filename</span><span class="si">)</span><span class="s2">:"</span>
        <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"tags"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
            if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$skip</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"no"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
                </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$dd</span><span class="s2">#</span><span class="nv">$descr</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="nt">-f</span> table.awk
                <span class="nb">printf</span> <span class="s1">'\n'</span>
            <span class="k">fi
        fi
    fi
done
</span><span class="nb">echo</span> <span class="nv">$tags</span> | xargs <span class="nt">-n1</span> | <span class="nb">sort</span> <span class="nt">-u</span> | xargs
<span class="nb">echo </span>Missing description: <span class="nv">$nodescr</span>
</code></pre></div>  </div>
</details>

<p>Output looks really nice, though:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">br34kp0int@lobsterblood~/» ./scriptz blog 
blogmp3             : Converts the files from Repulsive 
                      Recrods tech software demos to MP3 
                      and copies them to blog for 
                      educational purposes

blogthumbs          : Generates thumbnails for blog 
                      galleries

day2day             : Generates a blog entry with current 
                      data and some random title
</span></code></pre></div></div>

  </section>
  
</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2022 Deviant Syndrome. All rights reserved.</span>
  <span class="footer__copyright">Based on <a href="https://github.com/joshgerdes/jekyll-uno">jekyll-uno</a> theme by Josh Gerdes</span>
</footer>

<script type="text/javascript" src="/js/main.js?1661590535535066000"></script>
<script type="text/javascript" src="/js/sheetrender.js"></script>
<script src="/js/audioplaylist.js"></script>	


    </div>
  </body>
</html>
