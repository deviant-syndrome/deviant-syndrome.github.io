<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="robots" content="noindex">
  

  <title>Deviant Syndrome</title>
  <meta name="description" content="coding, multimedia, gamedev, engineering">
  <meta name="author" content="Deviant Syndrome">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Deviant Syndrome">
  <meta name="twitter:description" content="coding, multimedia, gamedev, engineering">
  
  <meta name="twitter:image" content="/images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="Deviant Syndrome">
  <meta property="og:description" content="coding, multimedia, gamedev, engineering">
  <meta property="og:image" content="/images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="/css/main.css?1691750919555449000">
  <link rel="canonical" href="/page3/">
  <link rel="alternate" type="application/rss+xml" title="Deviant Syndrome" href="/feed.xml">
<script>
window.MathJax = {
  tex: {
      packages: ['base', 'ams', 'noerrors', 'noundefined'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: false
  },
  loader: {
    load: ['[tex]/noerrors']
  }
};

  window.MathJax = {
  startup: {
    ready: () => {
      console.log('MathJax is loaded, but not yet initialized');
      MathJax.startup.defaultReady();
      console.log('MathJax is initialized, and the initial typeset is queued');
    }
  }
};
</script>
<style>
  @font-face {
    font-family: 'alphaTab';
     src: url('/js/alphaTab/Font/Bravura.eot');
     src: url('/js/alphaTab/Font/Bravura.eot') format('embedded-opentype')
          , url('/js/alphaTab/Font/Bravura.woff') format('woff')
          , url('/js/alphaTab/Font/Bravura.etf') format('opentype')
          , url('/js/alphaTab/Font/Bravura.svg') format('svg');
     font-weight: normal;
     font-style: normal;
}
</style>
<link rel="stylesheet" type="text/css" href="/assets/notation.css"> 
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="/js/mathjax/tex-chtml.js" id="MathJax-script" async></script>

<script src="/js/alphaTab/AlphaTab.js" async></script>
<script src="/js/audiojs/audio.min.js"></script>
<link  href="/js/nanogallery2/css/nanogallery2.min.css" rel="stylesheet" type="text/css">
<script  type="text/javascript" src="/js/nanogallery2/jquery.nanogallery2.min.js"></script>
<link rel="stylesheet" href="/css/main.css?1691750919555449000">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Deviant Syndrome">
          <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Deviant Syndrome</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">coding, multimedia, gamedev, engineering</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to Deviant Syndrome blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

              <!-- Bandcamp -->
              <li class="navigation__item">
                <a href="http://hexensoldat.bandcamp.com" title="@Deviant Syndrome on Bandcamp"
                   target="_blank">
                  <i class="icon icon-social-bandcamp"></i>
                  <span class="label">Bandcamp</span>
                </a>
              </li>

              

            

            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/deviant-syndrome" title="deviant-syndrome on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>

            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <img style='width: 100%; margin-bottom: 40px;' src="/images/lcdheader.png"/>

<div style='column-count: 3; margin-bottom: 32px'>
<h4 style='margin-top: 0px;'>MENU</h4>
<ul>

  
    
      <li><a href="/categories/#code-bits">code bits (5)</a></li>
    
      <li><a href="/categories/#demo">demo (1)</a></li>
    
      <li><a href="/categories/#dsp-math">dsp math (2)</a></li>
    
      <li><a href="/categories/#vst-audio-software">vst audio software (14)</a></li>
    
      <li><a href="/categories/#music">music (2)</a></li>
    
      <li><a href="/categories/#journalism?">journalism? (3)</a></li>
    
      <li><a href="/categories/#dsp">dsp (4)</a></li>
    
      <li><a href="/categories/#dsp-audio-software">dsp audio software (1)</a></li>
    
      <li><a href="/categories/#software">software (1)</a></li>
    
  

</ul>
</div>

<!--
  // TODO: uncomment, once you have some updates ;-) 
  <header class="post-header">
   <h2 class="post-list__post-title">
     <a href="#" title="Latest updates">Latest updates</a>
   </h2>
</header>
<p></p>
<section class="post">
    I am very interesting, talented and sophisticated
</section>
<p></p>
<hr class="post-list__divider">

-->
<div class="main-post-list">

  <ol class="post-list">
    
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/Architecture_Ownership/" title="Architecture Ownership in the World of Agile">Architecture Ownership in the World of Agile</a></h2>
        
			 <p><section class="post"><blockquote>
  <p>Advertisements are all good; the news is all bad</p>

  <p>– <cite>Marshall McLuhan</cite></p>
</blockquote>

<p>This article summarises my thoughts, on why we often end up shipping terrible code, despite formally following
all the good practices.</p>

<h4 id="we-will-think-about-this-in-the-next-sprint">We will think about this in the next sprint</h4>

<p>Agile software development presents itself as a set of perfectly fitted values, unfortunately, very little of them really help to 
improve the quality of the product from the engineering point of view. 
This bulk of healthy practices of customer collaboration and continious delivery does not really directly address any of the potential code quality issues that comes along. Sometimes it feels like this methodology is enforcing you to avoid this topic entirely, 
substituting it with a “pact with the Devil” grade approach. Instead of making bad code better, it makes bad code <em>shippable</em>.
What’s even more pityful, the agile requirements can blur the lines between “good code” and “shippable code” so much, 
that developer teams can ship code for years, without even realizing how bad it is. Until it all suddenly crumbles. 
Sure, that the profressional software engineering communitty reacted to that with their famous and noble <a href="https://en.wikipedia.org/wiki/Software_craftsmanship#Manifesto">Software Craftmanship Manifesto</a>, it is IMHO still too abstract to have a  real impact on how software development (read: writing code) is approached in the world of Agile.</p>

<h4 id="peer-reviewed-garbage">Peer-reviewed garbage</h4>

<blockquote>
  <p>Relevant information is hard to come by. Soom it’ll be everywhere, unnoticed.</p>

  <p>– <cite>John Cage</cite></p>
</blockquote>

<p>Despite being very important and useful practice, code review cannot solve the problem of “shippable code” by itself.
In practice, code review can efficiently check the following:</p>
<ul>
  <li>Some obvious errors, which were  overlooked by the author and caught by a fresh pair of eyes</li>
  <li>Compliance to team’s conventions, readability and code quality standards</li>
  <li>Correctness of selected data structures</li>
  <li>Correctness of class structure and links between the elements introduced within the PR and nearby</li>
</ul>

<p>What code review process often fails to achieve, is to evaluate how does this part of code, which might be cohesive and
make total sense by itself, fits into the bigger picture: the project, the domain, the role, etc.
Thus, it becomes very hard to prevent situation, where on paper (and in mind) you ship a perfectly fine piece of code, 
when in fact, you’re just throwing another bucket of garbage into a pile.
<em>Practical example</em>: the PR adds some new functionality to a feature and it introduces a new service/utility class.
But what if that domain already has 50 services? Can a peer reviewer confidently keep track on that?</p>

<h4 id="micro-services-are-not-the-answer">Micro-services are not the answer</h4>

<blockquote>
  <p>There is nothing we really need to do that is not dangerous.</p>

  <p>– <cite>John Cage</cite></p>
</blockquote>

<p>The proposed solution for that would be the thing I call “architecture ownership”. Or “ownership of architecture”, this
should be analogous to other agile jargonisms like “product ownership”, “feature ownership”, etc.
Being an owner of a certain part of the project architecture implies having the answers to the following questions:</p>

<ul>
  <li>What are the business objects? What operations are defined on them?</li>
  <li>What invariants do those business object have?</li>
  <li>What is the pipeline of presenting those objects to the cusomer?</li>
  <li>What is the biggest current code quality challenge, what pollutes code the most?</li>
</ul>

<p>There is important omitment to be made here. You cannot have architecture ownership at the beginning of a project/feature, 
because in agile world, you, basically, not supposed to make architectural decisions at that point. Sounds crazy, huh?<br />
It might be a good approach, to have ownerships of certain domains/feature stuctures and flows, once they have matured a bit. 
Frequently that comes alongside with heavy refactoring and code re-arrangements, but once you have those set, it will be much 
easier to detect undesireable distortions of architecture, when reviewing some PRs.</p>

<p>Certain architectural descsions, like invariant checking, strict typing, member visibility, final classes and methods can enforce 
some definitive patterns, so it will make sub-par OOP approaches if not impossible, then at least clearly visible even in isolated PRs.</p>

<h4 id="but-what-do-i-do">But what do I do?</h4>

<blockquote>
  <p>The way to loose our principles is to examine them.</p>

  <p>– <cite>John Cage</cite></p>
</blockquote>

<p>Practical steps to introducing the concept of architecture ownership within an agile team would be the following:</p>
<ul>
  <li>Identify a part of the product, that needs architecture ownership. Most often it is the one, that is the  hardest to maintain, and
constantly giving you headaches.</li>
  <li>Measure the test coverage of this part</li>
  <li>Try to determine what was the main reason this part of the project became unmaintanable. What kind of bad patterns accumulated there?</li>
  <li>Based on the previous observation, come up with new clean architecture, that enforces certain patterns</li>
  <li>Gradually move this feature/functionality to the new architecture, using previously written test as a backup</li>
  <li>Agree on a way of code reviewing the upcoming related PRs, that checks them for possible pollutions and misusage of current elements of the architecture.</li>
</ul>
</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-08-05 20:02" class="post-list__meta--date date">5 Aug 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#agile">agile</a> <a href="/tags/#software">software</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/Audio_Postcards_1/" title="Audio Postcards from Stokfjörður's Dungeon">Audio Postcards from Stokfjörður's Dungeon</a></h2>
        
			 <p><section class="post"><style>
	.cplay-bounds {
		background-color: #4b4848;
		padding: 4px;
	}
	.cplay-bg {
	    height: 130px;
		margin-top: 4px;
		background-image: url("/assets/images/cover_art/healing.png");
		color: #cfd4d4;
	}
	h4.cplay-h {
        margin-top: 0px;
		padding-top: 6px;
		padding-left: 6px;
	}
</style>

<div data-nanogallery2="{&quot;thumbnailHeight&quot;:150,
				     &quot;thumbnailWidth&quot;:&quot;auto&quot;,
				     &quot;itemsBaseURL&quot;:&quot;&quot;,
&quot;thumbnailBuildInit2&quot;:&quot;image_grayscale_100%&quot;}" id="/assets/galleries/2020/Suomenlinna">

  <!-- gallery content -->
  
  

  

  

  

  

  

  

  

  

  

  
    

      
      
      
      
        <a href="/assets/galleries/2020/Suomenlinna/1.jpeg" title="1" data-ngthumb="/assets/galleries/2020/Suomenlinna/thumbs/1.jpeg">1</a>
      	
     
  

  
    

      
      
      
      
        <a href="/assets/galleries/2020/Suomenlinna/2.jpeg" title="2" data-ngthumb="/assets/galleries/2020/Suomenlinna/thumbs/2.jpeg">2</a>
      	
     
  

  
    

      
      
      
      
        <a href="/assets/galleries/2020/Suomenlinna/3.jpeg" title="3" data-ngthumb="/assets/galleries/2020/Suomenlinna/thumbs/3.jpeg">3</a>
      	
     
  

  
    

      
      
      
      
        <a href="/assets/galleries/2020/Suomenlinna/4.jpeg" title="4" data-ngthumb="/assets/galleries/2020/Suomenlinna/thumbs/4.jpeg">4</a>
      	
     
  

  
    

      
      
      
      
        <a href="/assets/galleries/2020/Suomenlinna/5.jpeg" title="5" data-ngthumb="/assets/galleries/2020/Suomenlinna/thumbs/5.jpeg">5</a>
      	
     
  

  
    

      
      
      
      
        	
     
  

  
    

      
      
      
      
        	
     
  

  
    

      
      
      
      
        	
     
  

  
    

      
      
      
      
        	
     
  

  
    

      
      
      
      
        	
     
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</div>

<div class="cplay-bounds"> <!-- gray bounding box  -->
	<b style="padding-left: 6px; color: lightblue">Dark Ambient/Experimental</b>
	<div class="cplay-bg">
	   <h4 class="cplay-h">Health Chamber</h4> <!-- todo margin -->
	   <p style="margin-left: 6px">Some raw soundscapes I came up with while assembling my virtual modular</p>
	</div>
	<!-- player -->
	<div class="audio-container">
	   <audio src="/mp3/2020/healthChamber.mp3" preload="auto"></audio>
	</div>
</div>
</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-08-04 21:28" class="post-list__meta--date date">4 Aug 2020</time>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/The_Way_of_the_Fire/" title="The Way of the Fire">The Way of the Fire</a></h2>
        
			 <p><section class="post"><h4 id="suomalainen-sanakirja">Suomalainen sanakirja</h4>

<table>
  <thead>
    <tr>
      <th>Suomea</th>
      <th>Englantia</th>
      <th>Suomea</th>
      <th>Englatia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>taivas</td>
      <td>skies</td>
      <td>hidas</td>
      <td>slow</td>
    </tr>
    <tr>
      <td>vatsani</td>
      <td>stomach</td>
      <td>liian</td>
      <td>too (late)</td>
    </tr>
    <tr>
      <td>mahtua</td>
      <td>to fit</td>
      <td>eroaa</td>
      <td>to resign</td>
    </tr>
    <tr>
      <td>valvoa</td>
      <td>to control</td>
      <td>noudattaa</td>
      <td>to obey</td>
    </tr>
    <tr>
      <td>tappaa</td>
      <td>to kill</td>
      <td>jaada</td>
      <td>to stay</td>
    </tr>
    <tr>
      <td>takia</td>
      <td>because of</td>
      <td>keralla</td>
      <td>at a time</td>
    </tr>
    <tr>
      <td>ampua</td>
      <td>to shoot</td>
      <td>taas</td>
      <td>again</td>
    </tr>
    <tr>
      <td>ovi</td>
      <td>door</td>
      <td>toinen</td>
      <td>other</td>
    </tr>
    <tr>
      <td>johtaa</td>
      <td>to lead</td>
      <td>makaa</td>
      <td>to lie</td>
    </tr>
    <tr>
      <td>työntaa</td>
      <td>to push</td>
      <td>kunnioitta</td>
      <td>to respect</td>
    </tr>
  </tbody>
</table>
</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-06-18 11:24" class="post-list__meta--date date">18 Jun 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#suomea">suomea</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/SuperCollider_pt3_rgun/" title="SuperCollider AU">SuperCollider AU</a></h2>
        
	<p class="excerpt"><h4 id="part-3-rompler-gun">Part 3. Rompler gun</h4>

<p>In order for MembrainSC to stand-out, alongside with the other features, we want it be able to play one-shot percussion PCM samples. This might seem unimportant and obvious, but combining synthethis / modeling with samples is extremely valuable. Again, I want to empaphize, that it moves complexity of layering different elements of percussion hits away from your DAW routing.</p>

<p>So, playing wave samples. JUCE has built-in support for that, and the API is surprisingly agile and straightforward.
All you need to do, is to define a new class, make it inherit Synthesiser, define a file reader for your wav, define the key range (yes, JUCE even does the sample pitch-mapping for you!).</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">RomplerGun</span><span class="o">::</span><span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// add voices to our sampler</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">addVoice</span><span class="p">(</span><span class="k">new</span> <span class="n">SamplerVoice</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="c1">// set up our AudioFormatManager class as detailed in the API docs</span>
    <span class="c1">// we can now use WAV and AIFF files!</span>
    <span class="n">audioFormatManager</span><span class="p">.</span><span class="n">registerBasicFormats</span><span class="p">();</span>

    <span class="c1">// now that we have our manager, lets read a simple file so we can pass it to our SamplerSound object.</span>
    <span class="n">File</span><span class="o">*</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="p">(</span><span class="n">File</span><span class="o">::</span><span class="n">getSpecialLocation</span><span class="p">(</span><span class="n">File</span><span class="o">::</span><span class="n">currentApplicationFile</span><span class="p">).</span><span class="n">getFullPathName</span><span class="p">()</span> <span class="o">+</span> <span class="s">"/Contents/Resources/kick_trimmed.wav"</span><span class="p">);</span>
    
    <span class="n">AudioFormatReader</span><span class="o">*</span> <span class="n">reader</span> <span class="o">=</span> <span class="n">audioFormatManager</span><span class="p">.</span><span class="n">createReaderFor</span><span class="p">(</span><span class="o">*</span><span class="n">file</span><span class="p">);</span>

    <span class="c1">// lock our sound to middle C</span>
    <span class="n">BigInteger</span> <span class="n">allNotes</span><span class="p">;</span>
    <span class="n">allNotes</span><span class="p">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

    <span class="c1">// finally, add our sound</span>
    <span class="n">addSound</span><span class="p">(</span><span class="k">new</span> <span class="n">SamplerSound</span><span class="p">(</span><span class="s">"default"</span><span class="p">,</span> <span class="o">*</span><span class="n">reader</span><span class="p">,</span> <span class="n">allNotes</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">));</span>
    <span class="kt">int</span> <span class="n">numFiles</span> <span class="o">=</span> <span class="n">scanROM</span><span class="p">(</span><span class="n">File</span><span class="o">::</span><span class="n">getSpecialLocation</span><span class="p">(</span><span class="n">File</span><span class="o">::</span><span class="n">userDocumentsDirectory</span><span class="p">).</span><span class="n">getFullPathName</span><span class="p">()</span> <span class="o">+</span> <span class="s">"/MembrainSC"</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Scanned files: "</span> <span class="o">&lt;&lt;</span> <span class="n">numFiles</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    
    <span class="n">sampleLoaded</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">sampleIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</p>
	<p style="padding-top: 20px; text-align: right;"><a href="/2020/SuperCollider_pt3_rgun/" class="btn">
			  Read more<!-- <img src="/images/more.svg"></img> -->
			</a></p>  
		
        <div class="post-list__meta">
            <time datetime="2020-06-02 21:01" class="post-list__meta--date date">2 Jun 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#supercollider">supercollider</a> <a href="/tags/#juce">juce</a> <a href="/tags/#membrainsc">membrainsc</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/SuperColliderAU_p2/" title="SuperColliderAU">SuperColliderAU</a></h2>
        
	<p class="excerpt"><h4 id="part-2-containerizing-in-a-juce-based-plugin">Part 2. Containerizing in a JUCE-based plugin</h4>

<p>Now, that we managed to build the thing. Let’s see how we can actually use it. Of course, you can follow official instructions and sorta “bake” SuperCollider synthdefs into the plugin. There is (was) even a script among the SuperCollider quarks for that. 
But this approach kinda fell flat for me. Guess why? Boooring GUI? Yes sure, and also no multichannel output, and MIDI support being rudimental as well.</p>

<p>The normal approach here would be just port the project to a modern framework like JUCE, because the there is not that much DSP-specific code in SCAU itself, it  kinda just start the SC server, exposes a UDP port and routes the server’s output to plugin output. Unfortunately, this is still too much for my “a pointer to  a pointer? WTF?” C++ skills.</p>

<p>So, my descioon was to start the  DSP C++ journey of mine with something extremely noob-friendly and actively maintained as JUCE framework. Among the million other cool DSP-related features, it provides a suite to . So, you basically can hve a plugin audio-procesing chain inside a parent “container plugin”. Well, why not try it with our recently build SuperColliderAU then? Let’s see how it goes:</p>

</p>
	<p style="padding-top: 20px; text-align: right;"><a href="/2020/SuperColliderAU_p2/" class="btn">
			  Read more<!-- <img src="/images/more.svg"></img> -->
			</a></p>  
		
        <div class="post-list__meta">
            <time datetime="2020-05-30 15:08" class="post-list__meta--date date">30 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#juce">juce</a> <a href="/tags/#supercollider">supercollider</a> <a href="/tags/#membrainsc">membrainsc</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/SuperCollderAU_p1/" title="SuperCollderAU">SuperCollderAU</a></h2>
        
			 <p><section class="post"><h4 id="part-1-building">Part 1: Building</h4>

<p>Hey! You! Wanna turn your SuperCollider program into a real AU virtual instrument to use in your DAW? Great, then come with me into the depths of C++ sloppiness and clumsiness.</p>

<p>So, once upon.a time there was a project that allowed to run a SuperCollider SC synth server inside an AU plugin. It even ended up in the
 official SC repositories. But years  were  passing and dependencies around it slowly mutated, becoming more and more hostile. At some point in time, it stopped producing a valid AU, and later then even stopped building at all. The original author still expresses some interest to the project, last commit was about half year ago, but yet again I’m too anti-social to bother people with my crazy ideas, so I went there myself.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--recursive</span> https://github.com/supercollider/SuperColliderAU
</code></pre></div></div>

<p>Down below are the steps that fixes problem with building it.</p>

<ol>
  <li>
    <p>At the moment of writing this post, I am on macOS Catalina 10.15.3 (19D76). I do not know how much it is actually important, but nevertheless.</p>
  </li>
  <li>
    <p>It is better to build Supercollider from its standalone repo. Just get the fresh revision and follow the build instructions. Then copy it to /SuperColliderAU/supercollider/build. Revision (22e45f78fb8db8769aea34ce4ce09082917dd40d) worked for me.</p>
  </li>
  <li>
    <p>Go to superCollider submodule and checkout to develop branch. Get some fresh revision, (30205c18a6cb5d74fff775d28469051899a2d0bb) worked for me.</p>
  </li>
  <li>
    <p>On some hosts (Like the one bundled with JUCE as a code example, SuperColliderAU does not get fully initialised on scan, so the scan crushes, when tries to destroy its instance afterwards). If that is your case, edit the SCProcess.cpp file, comment out the mPort-&gt;stopAsioThread(); line.</p>
  </li>
  <li>
    <p>By the way, what’s awesome about running a JUCE VST Host through Xcode, you can use debugger on the problematic plugin code, if you have sources and it was compiled with debug symbols.</p>
  </li>
  <li>Supercollider now uses bundled C++ boost, SupercolliderAU make files are not aware of that. As a workaround:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deadvikki@darkhorse<span class="nv">$ </span>brew <span class="nb">install </span>boost
</code></pre></div>    </div>
    <p>6.1. And edited SuperCollierAU CMakeList.txt file, so it searches in my local include paths:</p>
    <pre><code class="language-code">diff --git a/CMakeLists.txt b/CMakeLists.txt
index dd3d4c7..b206ac6 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -76,11 +76,11 @@ set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -g")
 
set(scau_bundle "SuperColliderAU")
set(SNDFILE_INCLUDE_DIR ${SC_DIR}/external_libraries/libsndfile/)
-set(BOOST_INCLUDE_DIR ${SC_DIR}external_libraries/boost/)
+set(BOOST_INCLUDE_DIR /usr/local/include/)
set(TLSF_INCLUDE_DIR ${SC_DIR}/external_libraries/TLSF-2.4.6/src/)
 
 include_directories(${SC_DIR}/external_libraries
-       ${SC_DIR}/${BOOST_INCLUDE_DIR}
+       ${BOOST_INCLUDE_DIR}
        ${SNDFILE_INCLUDE_DIR}
        ${PTHREADS_INCLUDE_DIR}
       ${TLSF_INCLUDE_DIR}
(END)
</code></pre>
  </li>
  <li>We do not want to use bundled Boost, so we say
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake <span class="nt">-DSYSTEM_BOOST</span><span class="o">=</span>ON ..
make
</code></pre></div>    </div>
    <p>5.1. It will compile, but the link process will fail, but that’s not fatal</p>
  </li>
  <li>Re-run make in verbose mode,
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make <span class="nv">VERBOSE</span><span class="o">=</span>1
</code></pre></div>    </div>
    <p>6.1. Manually execute the last command, just edit it a bit. 
 6.2. Remove <code class="language-plaintext highlighter-rouge">-lboost_system</code> and add  <code class="language-plaintext highlighter-rouge">-L /usr/local/lib -framework AppKit</code></p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">!</code> Run make again to it can finish copying resource files to build dir.</li>
</ol>

<p>By the way it screwed up my icu4c vesion , which node relied on. So, 
brew info icu4c <br />
brew switch icu4c 64.2</p>

<p>Bottom line: 
It builds.Currently it does not passes AUVAL checks, thankfully, garbage DAWs like my old trustworthy Tracktion7, do not bother validation. People been reporting that it also work in Reaper.</p>

<p>Problem: it seems that we are not freeing UDP port properly, so within the same host it starts on different port every time. But it might be the nature of UDP ports</p>

</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-05-21 22:05" class="post-list__meta--date date">21 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#dsp">dsp</a> <a href="/tags/#juce">juce</a> <a href="/tags/#supercollider">supercollider</a> <a href="/tags/#membrainsc">membrainsc</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/MembrainSC_Toolset/" title="MembrainSC Development.">MembrainSC Development.</a></h2>
        
	<p class="excerpt"><h4 id="part-1-technical-overview-and-toolset">Part 1. Technical Overview and toolset</h4>

<p><img src="/assets/images/figures/membrainsc_routing.svg" alt="MemebrainSC proposed architecture" /></p>

<p>As you, in this series of blog posts, we (well, mostly me) gonna built some kind of strange drum machine in a form of VST (virtual instrument) plugin.</p>

</p>
	<p style="padding-top: 20px; text-align: right;"><a href="/2020/MembrainSC_Toolset/" class="btn">
			  Read more<!-- <img src="/images/more.svg"></img> -->
			</a></p>  
		
        <div class="post-list__meta">
            <time datetime="2020-05-21 20:24" class="post-list__meta--date date">21 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#dsp">dsp</a> <a href="/tags/#juce">juce</a> <a href="/tags/#supercollider">supercollider</a> <a href="/tags/#membrainsc">membrainsc</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/MembrainSC_Contents/" title="MembrainSC. Introduction">MembrainSC. Introduction</a></h2>
        
	<p class="excerpt"><h4 id="a-drum-machine-with-that-sci-fi-underground-vibe">A drum machine with that “sci-fi underground” vibe…</h4>

<p>So, I can already imagine you all asking me, why design your own drum machine in 2020, for fokks sake? 
Well, in short, I have my reasons. Those are mainly education, inspiration and megalomania, of course. The latter is particularly important, because, instead of doing one more classic 80’s drum machine replica (which am I not capable of, anyway) I came up with an idea of a plugin, that resembles the same “engineering around limitations” approach to doing drum sounds: a combination of synthesis, physical modelling and PCM samples.</p>

<p>Also, unlike those old low-computational power units, we can supply it with much more humanise capabilities, especially for cymbals.</p>

</p>
	<p style="padding-top: 20px; text-align: right;"><a href="/2020/MembrainSC_Contents/" class="btn">
			  Read more<!-- <img src="/images/more.svg"></img> -->
			</a></p>  
		
        <div class="post-list__meta">
            <time datetime="2020-05-21 20:13" class="post-list__meta--date date">21 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#dsp">dsp</a> <a href="/tags/#juce">juce</a> <a href="/tags/#supercollider">supercollider</a> <a href="/tags/#membrainsc">membrainsc</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/The_Danger_of_the_Soul/" title="The Danger of the Soul">The Danger of the Soul</a></h2>
        
			 <p><section class="post"><h4 id="suomalainen-sanakirja">Suomalainen sanakirja</h4>

<table>
  <thead>
    <tr>
      <th>Suomea</th>
      <th>Englantia</th>
      <th>Suomea</th>
      <th>Englantia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>selittä</td>
      <td>to explain</td>
      <td>pyyhkia</td>
      <td>to erase</td>
    </tr>
    <tr>
      <td>valmistella</td>
      <td>to prepare</td>
      <td>toistaa</td>
      <td>to repeat</td>
    </tr>
    <tr>
      <td>levätä</td>
      <td>to rest</td>
      <td>hikoilla</td>
      <td>to sweat</td>
    </tr>
    <tr>
      <td>miettiä</td>
      <td>to think</td>
      <td>poistua</td>
      <td>to leave</td>
    </tr>
    <tr>
      <td>laittaa</td>
      <td>to put</td>
      <td>suhtautua</td>
      <td>to relate</td>
    </tr>
    <tr>
      <td>pslsutta</td>
      <td>to return</td>
      <td>sammutta</td>
      <td>to turn off</td>
    </tr>
  </tbody>
</table>

<!-- more -->

<p>And more to go here!</p>

<table>
  <thead>
    <tr>
      <th>Suomea</th>
      <th>Englantia</th>
      <th>Suomea</th>
      <th>Englantia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>liitto</td>
      <td>union</td>
      <td>teräksen</td>
      <td>steel</td>
    </tr>
    <tr>
      <td>leviää</td>
      <td>to spread</td>
      <td>tuotanossa</td>
      <td>production</td>
    </tr>
    <tr>
      <td>yhteistyö</td>
      <td>cooperation</td>
      <td>järjestö</td>
      <td>organisation</td>
    </tr>
    <tr>
      <td>ase</td>
      <td>gun</td>
      <td>ampua</td>
      <td>to shoot</td>
    </tr>
    <tr>
      <td>aiemmin</td>
      <td>previous</td>
      <td>kertoa</td>
      <td>to tell</td>
    </tr>
    <tr>
      <td>heittää</td>
      <td>to throw</td>
      <td>seura</td>
      <td>company</td>
    </tr>
    <tr>
      <td>pyytä</td>
      <td>to ask a f.</td>
      <td>kestä</td>
      <td>stand up</td>
    </tr>
  </tbody>
</table>

</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-05-16 10:24" class="post-list__meta--date date">16 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#suomea">suomea</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
      <li>
        <h2 class="post-list__post-title post-title"><a href="/2020/NeverLooseAScript/" title="Never loose a Bash script again">Never loose a Bash script again</a></h2>
        
			 <p><section class="post"><p>Like most of us, I’ve a handful of bash scripts to automate my day to day tasks, related to work and personal activities. They all live somewhere along the lines of ~/myscripts and this entry is added to my PATH shell env.</p>

<p>The downside of this, is, of course, that you scripts directory become a bit of a mess, congested with all that obsolete and half-baked stuff, that also pollutes your autocomplete as well.</p>

<p>To fight this I came up with a simple convention for all the utility scripts I place In that magic folder. There should be two commented block after bash header in every script: first is a single string of space separated tags, then a short description of what this script does.</p>

<p>Example would be like:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># blog util mp3</span>
<span class="c"># Convert DAW rendered demo WAVs to MP3 and places them </span>
<span class="c"># into dedicated blog folder</span>
</code></pre></div></div>

<p>Sticking to that convention, I was able to come up with a script that generates a summary of my utilities. It also filters by tag and flags the undocumented ones.</p>

<details>
  <summary>Lots of poor Bash gibberish
</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># meta</span>
<span class="c"># Lists my DIY Bash scripts</span>
<span class="nv">nodescr</span><span class="o">=</span><span class="s2">""</span>

<span class="nv">files</span><span class="o">=(</span><span class="si">$(</span><span class="nb">ls</span> ~/myscripts/. | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'\.'</span><span class="si">)</span><span class="o">)</span>
<span class="nv">tags</span><span class="o">=</span><span class="s2">""</span>
<span class="k">for </span>f <span class="k">in</span> <span class="k">${</span><span class="nv">files</span><span class="p">[*]</span><span class="k">}</span><span class="p">;</span> <span class="k">do
    </span><span class="nv">filename</span><span class="o">=</span><span class="nv">$f</span>
    <span class="nv">descr</span><span class="o">=</span><span class="s2">""</span>
    <span class="nv">skip</span><span class="o">=</span><span class="s2">"no"</span>
    <span class="nv">linecount</span><span class="o">=</span>0
    <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-r</span> line<span class="p">;</span> <span class="k">do
        if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span> <span class="o">=</span>~ ^#.<span class="k">*</span><span class="nv">$ </span><span class="o">]]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">let</span> <span class="s2">"linecount+=1"</span>
            <span class="k">if</span> <span class="o">((</span>linecount <span class="o">==</span> 2<span class="o">))</span><span class="p">;</span> <span class="k">then
                if</span> <span class="o">!</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"tags"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
                    if</span> <span class="o">[[</span> <span class="nv">$line</span> <span class="o">!=</span> <span class="k">*</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span><span class="k">*</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
                        </span><span class="nv">skip</span><span class="o">=</span><span class="s2">"yes"</span>
                    <span class="k">fi
                fi
                </span><span class="nv">tags</span><span class="o">=</span><span class="s2">"</span><span class="nv">$tags</span><span class="k">${</span><span class="nv">line</span>:1<span class="k">}</span><span class="s2">"</span>

            <span class="k">fi
            if</span> <span class="o">((</span>linecount <span class="o">&gt;</span> 2<span class="o">))</span><span class="p">;</span> <span class="k">then
                </span>descr+<span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">line</span>:1<span class="k">}</span><span class="s2">"</span>
            <span class="k">fi
        else
            </span><span class="nb">break
        </span><span class="k">fi
    done</span> &lt;<span class="s2">"</span><span class="nv">$filename</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$descr</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nv">nodescr</span><span class="o">=</span><span class="s2">"</span><span class="nv">$nodescr</span><span class="s2"> </span><span class="nv">$filename</span><span class="s2">"</span>
    <span class="k">else
        </span><span class="nb">dd</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">printf</span> <span class="s1">'%-20s'</span> <span class="nv">$filename</span><span class="si">)</span><span class="s2">:"</span>
        <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"tags"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
            if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$skip</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"no"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
                </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$dd</span><span class="s2">#</span><span class="nv">$descr</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="nt">-f</span> table.awk
                <span class="nb">printf</span> <span class="s1">'\n'</span>
            <span class="k">fi
        fi
    fi
done
</span><span class="nb">echo</span> <span class="nv">$tags</span> | xargs <span class="nt">-n1</span> | <span class="nb">sort</span> <span class="nt">-u</span> | xargs
<span class="nb">echo </span>Missing description: <span class="nv">$nodescr</span>
</code></pre></div>  </div>
</details>

<p>Output looks really nice, though:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">br34kp0int@lobsterblood~/» ./scriptz blog 
blogmp3             : Converts the files from Repulsive 
                      Recrods tech software demos to MP3 
                      and copies them to blog for 
                      educational purposes

blogthumbs          : Generates thumbnails for blog 
                      galleries

day2day             : Generates a blog entry with current 
                      data and some random title
</span></code></pre></div></div>
</section></p>
		
        <div class="post-list__meta">
            <time datetime="2020-05-14 19:07" class="post-list__meta--date date">14 May 2020</time>
            
            &#8226; <span class="post-meta__tags">on <a href="/tags/#bash">bash</a> </span>
            
        </div>
        <hr class="post-list__divider">
      </li>
    
  </ol>

  <hr class="post-list__divider ">

  
      <nav class="pagination" role="navigation">
  
    
      <a rel="prev" class="posts newer btn small" href="/page2/">← Newer Posts</a>
    
  

  <span class="pagination__page-number">Page 3 of 4</span>

  
    <a rel="next" class="posts older btn small" href="/page4/">Older Posts →</a>
  
</nav>

  

</div>

      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2023 Deviant Syndrome. All rights reserved.</span>
  <span class="footer__copyright">Based on <a href="https://github.com/joshgerdes/jekyll-uno">jekyll-uno</a> theme by Josh Gerdes</span>
</footer>

<script type="text/javascript" src="/js/main.js?1691750919555449000"></script>
<script type="text/javascript" src="/js/sheetrender.js"></script>
<script src="/js/audioplaylist.js"></script>	


    </div>
  </body>
</html>
